2:I[5613,[],""]
4:I[1778,[],""]
5:I[5250,["250","static/chunks/250-70e21483a8ac042a.js","749","static/chunks/749-0811daa962ecf9d9.js","404","static/chunks/app/blog/page-43fe3314f17271aa.js"],""]
3:["slug","rss-with-nextjs","d"]
0:["HSU3vvD4Mp5xp-Up8ZCQ5",[[["",{"children":["blog",{"children":[["slug","rss-with-nextjs","d"],{"children":["__PAGE__?{\"slug\":\"rss-with-nextjs\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","rss-with-nextjs","d"],{"children":["__PAGE__",{},["$L1",[["$","div",null,{"className":"text-center border-y-2 py-5","children":[["$","h1",null,{"className":"text-4xl font-bold text-sky-600","children":"Adding an RSS feed to your static Next.js site"}],["$","h2",null,{"children":"A quick explanation of how I added an RSS feed to my blog"}],["$","h3",null,{"children":"2023-12-23"}]]}],["$","div",null,{"className":"prose prose-lg","children":[["$","p",null,{"children":"While fixing up this blog, I decided I wanted to publish an RSS feed for it. I struggled a bit at\nfirst to figure out the best way to do this properly in a fully static Next.js site, so I'm\nwriting this in case it might help someone in the future."}],"\n",["$","p",null,{"children":"So... here it is:"}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"hljs language-ts","children":[["$","span",null,{"className":"hljs-comment","children":"// /app/rss.xml/route.ts"}],"\n",["$","span",null,{"className":"hljs-keyword","children":"import"}]," { ",["$","span",null,{"className":"hljs-title class_","children":"Feed"}]," } ",["$","span",null,{"className":"hljs-keyword","children":"from"}]," ",["$","span",null,{"className":"hljs-string","children":"\"feed\""}],";\n\n",["$","span",null,{"className":"hljs-keyword","children":"export"}]," ",["$","span",null,{"className":"hljs-keyword","children":"async"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," ",["$","span",null,{"className":"hljs-title function_","children":"GET"}],"(",["$","span",null,{"className":"hljs-params"}],") {\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," feed = ",["$","span",null,{"className":"hljs-keyword","children":"new"}]," ",["$","span",null,{"className":"hljs-title class_","children":"Feed"}],"({\n    ",["$","span",null,{"className":"hljs-attr","children":"title"}],": ",["$","span",null,{"className":"hljs-string","children":"\"David Richey's Blog\""}],",\n    ",["$","span",null,{"className":"hljs-attr","children":"description"}],": ",["$","span",null,{"className":"hljs-string","children":"\"My personal blog, mostly about programming\""}],",\n    ",["$","span",null,{"className":"hljs-attr","children":"id"}],": ",["$","span",null,{"className":"hljs-string","children":"\"https://darichey.com\""}],",\n    ",["$","span",null,{"className":"hljs-attr","children":"link"}],": ",["$","span",null,{"className":"hljs-string","children":"\"https://darichey.com\""}],",\n    ",["$","span",null,{"className":"hljs-attr","children":"copyright"}],": ",["$","span",null,{"className":"hljs-string","children":"\"All rights reserved\""}],",\n  });\n\n  ",["$","span",null,{"className":"hljs-comment","children":"// get allMyPosts from somewhere, populate the feed somehow"}],"\n  ",["$","span",null,{"className":"hljs-keyword","children":"for"}]," (",["$","span",null,{"className":"hljs-keyword","children":"const"}]," post ",["$","span",null,{"className":"hljs-keyword","children":"of"}]," allMyPosts) {\n    feed.",["$","span",null,{"className":"hljs-title function_","children":"addItem"}],"({\n      ",["$","span",null,{"className":"hljs-attr","children":"title"}],": post.",["$","span",null,{"className":"hljs-property","children":"title"}],",\n      ",["$","span",null,{"className":"hljs-attr","children":"description"}],": post.",["$","span",null,{"className":"hljs-property","children":"subtitle"}],",\n      ",["$","span",null,{"className":"hljs-attr","children":"date"}],": ",["$","span",null,{"className":"hljs-keyword","children":"new"}]," ",["$","span",null,{"className":"hljs-title class_","children":"Date"}],"(post.",["$","span",null,{"className":"hljs-property","children":"date"}],"),\n      ",["$","span",null,{"className":"hljs-attr","children":"link"}],": post.",["$","span",null,{"className":"hljs-property","children":"link"}],",\n    });\n  }\n\n  ",["$","span",null,{"className":"hljs-keyword","children":"return"}]," ",["$","span",null,{"className":"hljs-keyword","children":"new"}]," ",["$","span",null,{"className":"hljs-title class_","children":"Response"}],"(feed.",["$","span",null,{"className":"hljs-title function_","children":"rss2"}],"());\n}\n"]}]}],"\n",["$","p",null,{"children":"That's all it takes! You can stop reading now if that's all you need."}],"\n",["$","h2",null,{"children":"Details"}],"\n",["$","p",null,{"children":["This takes advantage of Next.js ",["$","a",null,{"href":"https://nextjs.org/docs/app/building-your-application/routing/route-handlers","children":"Route Handlers"}],".\nThis approach was non-obvious to me, because, in my goal to create a static site, I had previously dismissed route handlers\nas a feature I could use. I viewed them as a purely dynamic thing (how is my static site going to handle a request?), but\nthat is not the case! Specifically, ",["$","code",null,{"children":"GET"}]," handlers ",["$","a",null,{"href":"https://nextjs.org/docs/app/building-your-application/deploying/static-exports#route-handlers","children":["\"render to a static file during ",["$","code",null,{"children":"next build"}],"\""]}],"."]}],"\n",["$","p",null,{"children":["In fact... this exact RSS use case ",["$","a",null,{"href":"https://nextjs.org/docs/app/building-your-application/routing/route-handlers#non-ui-responses","children":"is an example in the docs"}],"! In my defense, I did search ðŸ¥²\n",["$","img",null,{"src":"/img/posts/rss-with-nextjs/search.png","alt":"an image of the Next.js docs site with the search query \"rss\". No results are found."}]]}],"\n",["$","h2",null,{"children":"Alternatives"}],"\n",["$","p",null,{"children":"Before backing up and considering route handlers, I tried a few different things..."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["Writing ",["$","code",null,{"children":"out/rss.xml"}]," or ",["$","code",null,{"children":"public/rss.xml"}]," in ",["$","code",null,{"children":"generateStaticParams()"}],". I saw a couple resources online recommending this approach, but it is flawed, because it doesn't work correctly in ",["$","em",null,{"children":"both"}]," ",["$","code",null,{"children":"next dev"}]," and ",["$","code",null,{"children":"next build"}],"."]}],"\n",["$","li",null,{"children":["Adding an extra step to my build script to run a program to generate ",["$","code",null,{"children":"out/rss.xml"}],". This was annoying, because I couldn't easily share the code for getting ",["$","code",null,{"children":"allMyPosts"}]," between the Next.js app and this other program."]}],"\n",["$","li",null,{"children":"Creating a webpack plugin to generate the file. I was getting truly desparate."}],"\n"]}],"\n",["$","p",null,{"children":"In the end, I'm glad I stopped and read through the docs again, because the final product is infinitely better than any of those!"}]]}]],null]]},["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$3","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"en","children":["$","body",null,{"children":["$","div",null,{"className":"flex justify-center my-10","children":["$","div",null,{"className":"flex flex-col w-4/5 md:w-1/3 gap-4","children":[["$","section",null,{"className":"flex flex-row justify-around","children":[["$","$L5",null,{"href":"/","className":"font-semibold text-2xl","children":"Home"}],["$","$L5",null,{"href":"/blog","className":"font-semibold text-2xl","children":"Blog"}]]}],["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]]}]}]}]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f77cc7718b0231e8.css","precedence":"next","crossOrigin":""}]],"$L6"]]]]
6:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Adding an RSS feed to your static Next.js site"}]]
1:null
